{% extends "blog/base.html" %}
{% load crispy_forms_tags %}
{% block content %}

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        a.disable {
          pointer-events: none;
          cursor: default;
        }

    </style>

    <title>Quality Assessment</title>

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

</head>
<div>

    <main>
      <div class="container">
        <div class="messages-container">

        </div>



  <h3 class="review-title">
  <span class="text-muted">Welcome</span>
  <a href="{% url 'profile' %}" class="review-title-user">{{ user.username }}</a>

</h3>
<ul class="review-menu">
  <li>
    <a href="/scholar" >Databases</a>
  </li>
  <li>
    <a href="/snowballing" class="disable">Snowballing</a>
  </li>

    <li>
    <a href="/abstract" class="disable">Abstract Screening</a>
  </li>
        <li >
    <a href="/fulltext">Full-Text Screening</a>
  </li>
  <li class="active">
    <a href="/quality-assessment">Quality Assessment</a>
  </li>



</ul>
<input type="hidden" id="review-id" value="6085">

  <div class="row">
    <div class="col-sm-11 col-md-12 col-lg-13">
<div>
      <div>


    <h3 id="1" style="padding: 30px;">
       Section 1
    </h3>

    <ul class="list-group" >
        <li class="list-group-item" id="1-1">First item</li>
        <li class="list-group-item" id="1-2">Second item</li>
        <li class="list-group-item" id="1-3">Third item</li>
      </ul>


</div>
<div>
    <h3 id="2" style="padding: 30px;">
        Section 2
    </h3>
    <ul class="list-group">
        <li class="list-group-item" id="2-1">First item</li>
        <li class="list-group-item" id="2-2">Second item</li>
        <li class="list-group-item" id="2-3">Third item</li>
      </ul>




</div>
<div>
    <h3 id="3" style="padding: 30px;">
        Section 3
    </h3>
    <ul class="list-group">
        <li class="list-group-item" id="3-1">First item</li>
        <li class="list-group-item" id="3-2">Second item</li>
        <li class="list-group-item" id="3-3">Third item</li>
      </ul>
</div>
<div>
<div>
    <input type="button" id="btn"  class="btn btn-success offset-4" style="margin-top: 15px"  value="Submit Response">
</div>



<div style="padding-top: 50px;" id="scoresdiv">


</div>
<script>
 $(document).ready(()=>{

            var sections = 3;
            var ques = 3;

            sectionArr = ['Is machine learning helpful in systematic reviews?', 'Is Machine learning for qualitative and quantitative results efficient?','Are the results satisfied using Machine Learning'];

            quesArr = [
                ['Is the Purpose of the Data analysis clear?',' Are the data collection methods adequately detailed','Are the research aims clearly specified'],
                ['Is the Purpose of the Data analysis clear?',' Are the data collection methods adequately detailed','Are the research aims clearly specified'],
                ['Is the Purpose of the Data analysis clear?',' Are the data collection methods adequately detailed','Are the research aims clearly specified'],
                ['Is the Purpose of the Data analysis clear?',' Are the data collection methods adequately detailed','Are the research aims clearly specified']
            ]


            for(var i =0;i < sections;i++){

                $(`#${(i+1)}`).html(`${sectionArr[i]}`);

                for(var j =0;j<ques;j++){
                    $(`#${(i+1)}-${(j+1)}`).html(`
                    ${quesArr[i][j]}
                    <div class="abc${(i+1)}-${(j+1)}" style="padding-top:40px;">
                    <label class="radio-inline" style="width:33%"><input type="radio" name="optradio${(i+1)}-${(j+1)}" checked value="Yes">&nbspYes</label>
                    <label class="radio-inline" style="width:33%"><input type="radio" name="optradio${(i+1)}-${(j+1)}" value="No">&nbspNo</label>
                    <label class="radio-inline" style="width:33%"><input type="radio" name="optradio${(i+1)}-${(j+1)}" value="Maybe">&nbspMaybe</label></div>
                    `);
                }
            }



            $('#btn').click(function(){

                assessment = []
                Scores= [];
                for (var i=0;i<4;i++){
                    sectionAss = []
                    sectionScore = 0.0;
                    for(var j =0;j<3;j++){
                        sectionAss.push($(`input[name=optradio${(i+1)}-${(j+1)}]:checked`).val());
                        if($(`input[name=optradio${(i+1)}-${(j+1)}]:checked`).val() == 'Yes')sectionScore+=1;
                        else if ($(`input[name=optradio${(i+1)}-${(j+1)}]:checked`).val() == 'No')sectionScore+=0.5;
                    }
                    assessment.push(sectionAss);
                    Scores.push(sectionScore);
                }

                console.log(Scores);



                var divContent = ``;

                for (var i=0;i<3;i++){
                    divContent += `
                        <h5>${sectionArr[i]}</h5>
                        <p style="padding-bottom:30px">${((Scores[i]/3)*100).toFixed(2)}% Accuracy</p>
                    `
                }


                $('#scoresdiv').html(`
                            <h2>
                    Quality Assessment Report
                </h2>

                <div id="scoresdiv">
                    ${divContent}
                </div>
                `)


            });

        });
 </script>
    </div>

  </div>

    </div>
      </div>
  </div>
    </main>
</div>

{% endblock content %}

</html>